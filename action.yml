name: 'Bunkai SCA'
description: 'A minimalist, dependency-aware Software Composition Analysis (SCA) tool for Perl.'
author: 'LESIS'
branding:
  icon: "shield"
  color: "blue"

inputs:
  project-path:
    description: 'The path to the project to be analyzed by Bunkai.'
    required: false
    default: '.'
  mode:
    description: 'Bunkai execution mode: scan, plan, apply, or update.'
    required: false
    default: 'scan'
  plan-output-file:
    description: 'Output file for planned issue updates (JSON).'
    required: false
    default: 'bunkai-updates.json'
  apply-update-id:
    description: 'Issue update ID to apply when mode=apply.'
    required: false
    default: ''
  perlcritic-severity:
    description: 'The severity level for Perl::Critic.'
    required: false
    default: '1'
  perlcritic-paths:
    description: 'The paths to lint with Perl::Critic.'
    required: false
    default: ''
  sarif-output:
    description: 'The SARIF output file path.'
    required: false
    default: ''
  test-command:
    description: 'The command to run tests with coverage.'
    required: false
    default: ''

outputs:
  plan-output-file:
    description: 'Resolved path to the generated updates plan JSON file (mode=plan).'

runs:
  using: docker
  image: docker://ghcr.io/lesis-lat/bunkai/bunkai:latest
  entrypoint: /app/action-entrypoint.sh
